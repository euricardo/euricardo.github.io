/*
 * Serene Full Screen Gallery v2.0.3 (13 Aug 2013)
 *
 * Copyright 2011-2013 ThemeCatcher
 *
 * All rights reserved
 */
!function(a,b){"use strict";function O(b,c){var d=B.eq(b);if(d.length&&void 0===C[b]){C[b]=!0;var e=a("<img/>"),g=!1;e.load(function(){e.unbind("load"),setTimeout(function(){W(e),V(),"function"==typeof c&&c()},1)}).bind("error",function(){!g&&I.errorBackground&&e.attr("src",I.errorBackground),g=!0}),setTimeout(function(){e.attr("src",d.attr("href")),a("div",f).eq(b).append(e)},1)}}function P(){return E===F-1?0:E+1}function Q(){return 0===E?F-1:E-1}function R(a){return a[Math.floor(Math.random()*a.length)]}function S(a,b){"function"==typeof b&&b(),d.trigger(a)}function T(){u=a(b),v=a("body"),d=a('<div class="serene-outer"></div>').append(e=a('<div class="serene-overlay"></div>'),f=a('<div class="serene-stage"></div>'),g=a('<div class="serene-caption-outer"></div>').append(a('<div class="serene-caption-helper"></div>').append(h=a('<div class="serene-caption"></div>'))),k=a('<div class="serene-controls-outer"></div>').append(l=a('<div class="serene-controls"></div>').append(m=a('<div class="serene-prev"></div>'),n=a('<div class="serene-play"></div>'),o=a('<div class="serene-next"></div>')),p=a('<div class="serene-loading-wrap"></div>').append(q=a('<div class="serene-loading"></div>')),r=a('<div class="serene-close-wrap"></div>').append(s=a('<div class="serene-close"></div>')))),v.append(d),o.click(function(){return J.next(),!1}),m.click(function(){return J.prev(),!1}),r.click(J.close),D=v.css("overflow"),v.delegate(".serene-element","click",function(b){b.preventDefault(),S(w,I.onOpen),e.css("opacity",I.opacity).add(f).show(),v.css("overflow","hidden"),H=!0,U(a(this))})}function U(b){B=b;var c=b.attr("rel");c&&(B=a(".serene-element").filter(function(){return this.rel===c}),E=B.index(b)),F=B.length;for(var d=0;F>d;d++)f.append('<div class="serene-slide"/>');if(F>1){if(l.show(),f.click(function(){o.click()}).css("cursor","pointer"),I.keyboard&&a(document).bind("keydown.serene",function(a){H&&27===a.keyCode&&(a.preventDefault(),J.close()),H&&F>1&&(37===a.keyCode?(a.preventDefault(),m.click()):39===a.keyCode&&(a.preventDefault(),o.click()))}),I.slideshow&&(I.slideshowAuto?J.start():J.stop(),n.show(),k.addClass("serene-slideshow")),I.bullets){t=a('<div class="serene-bullets"/>');for(var e=0;F>e;e++){var g=B.eq(e).data("title")||"";a('<div class="serene-bullet">'+e+"</div>").data("index",e).attr("title",g).appendTo(t)}a(".serene-bullet",t).click(function(){return J.go(a(this).data("index")),!1}),l.append(t)}}else k.addClass("serene-single");k.fadeIn(I.controlSpeed),F>2&&O(Q());var h=setTimeout(function(){k.addClass("serene-load")},200);O(E,function(){clearTimeout(h),k.removeClass("serene-load"),u.resize(a.isFunction(a.throttle)?a.throttle(100,V):V),X()}),O(P())}function V(){var b=f.width(),c=f.height(),d=c/b;a("img",f).each(function(){var e=a(this),f=e.data("imageRatio"),g={};switch(d>f?I.fitAlways?e.width(b).height(b*f):1>=f&&I.fitLandscape?e.width(b).height(b*f):e.height(c).width(c/f):I.fitAlways?e.height(c).width(c/f):f>1&&I.fitPortrait?e.height(c).width(c/f):e.width(b).height(b*f),I.positionX){case"left":g.left=0,g.right="auto";break;case"right":g.left="auto",g.right=0;break;default:case"center":g.left=(b-e.width())/2+"px",g.right="auto"}switch(I.positionY){case"top":g.top=0,g.bottom="auto";break;case"bottom":g.top="auto",g.bottom=0;break;default:case"center":g.top=(c-e.height())/2+"px",g.bottom="auto"}e.css(g)})}function W(a){var b=a.width(),c=a.height();a.data({imageWidth:b,imageHeight:c,imageRatio:c/b})}function X(b){switch(S(x,I.onLoad),G=!0,k.addClass("serene-animating"),a(".serene-prev-slide",f).removeClass("serene-prev-slide"),i=a(".serene-current-slide",f).removeClass("serene-current-slide").addClass("serene-prev-slide"),j=a("div:eq("+E+")",f),b?O(Q()):O(P()),Z(),"none"===I.transition?g.hide():g.stop().animate({opacity:0},I.captionSpeed,function(){g.hide()}),j.css("visibility","hidden").addClass("serene-current-slide"),I.lowQuality&&f.addClass("serene-low"),I.transition){case"none":j.css("visibility","visible"),Y();break;default:case"fade":j.animate({opacity:0},0).css("visibility","visible").animate({opacity:1},I.speed,I.easing,Y);break;case"fadeOutFadeIn":var c=function(){j.animate({opacity:0},0).css("visibility","visible").animate({opacity:1},I.speed,I.easing,Y)};i.length?i.animate({opacity:0},I.speed,I.easing,c):c();break;case"slideDown":b?j.animate({top:f.height()},0).css("visibility","visible").animate({top:0},I.speed,I.easing,Y):j.animate({top:-f.height()},0).css("visibility","visible").animate({top:0},I.speed,I.easing,Y);break;case"slideRight":b?j.animate({left:-f.width()},0).css("visibility","visible").animate({left:0},I.speed,I.easing,Y):j.animate({left:f.width()},0).css("visibility","visible").animate({left:0},I.speed,I.easing,Y);break;case"slideUp":b?j.animate({top:-f.height()},0).css("visibility","visible").animate({top:0},I.speed,I.easing,Y):j.animate({top:f.height()},0).css("visibility","visible").animate({top:0},I.speed,I.easing,Y);break;case"slideLeft":b?j.animate({left:f.width()},0).css("visibility","visible").animate({left:0},I.speed,I.easing,Y):j.animate({left:-f.width()},0).css("visibility","visible").animate({left:0},I.speed,I.easing,Y);break;case"carouselRight":b?(j.animate({left:-f.width()},0).css("visibility","visible").animate({left:0},I.speed,I.easing,Y),i.animate({left:0},0).animate({left:f.width()},I.speed,I.easing)):(j.animate({left:f.width()},0).css("visibility","visible").animate({left:0},I.speed,I.easing,Y),i.animate({left:-f.width()},I.speed,I.easing));break;case"carouselLeft":b?(j.animate({left:f.width()},0).css("visibility","visible").animate({left:0},I.speed,I.easing,Y),i.animate({left:0},0).animate({left:-f.width()},I.speed,I.easing)):(j.animate({left:-f.width()},0).css("visibility","visible").animate({left:0},I.speed,I.easing,Y),i.animate({left:f.width()},I.speed,I.easing))}}function Y(){G=!1,I.lowQuality&&f.removeClass("serene-low");var b=B.eq(E),c=b.data("caption"),d=c?a(c).html():"",e=b.data("caption-position")||I.captionPosition;"random"===e&&(e=R(K)+" "+R(L)),d&&H&&(h.html(d),I.captionEnhancement.call(g),g.attr("class","serene-caption-outer").addClass("serene-position-"+e.split(" ").join("-")).stop().show().animate({opacity:1},I.captionSpeed)),k.removeClass("serene-animating"),S(y,I.onComplete)}function Z(){I.bullets&&F>1&&t.children().removeClass("active-bullet").eq(E).addClass("active-bullet")}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,B,D,F,I,J,M,c={speed:2e3,transition:"fade",fitLandscape:!1,fitPortrait:!0,positionX:"center",positionY:"center",easing:"swing",slideshow:!0,slideshowAuto:!0,slideshowSpeed:5e3,keyboard:!0,captionPosition:"center bottom",captionSpeed:600,bullets:!0,lowQuality:!1,errorBackground:"",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClose:!1,captionEnhancement:function(){}},w="sereneOpen",x="sereneLoad",y="sereneComplete",z="sereneCleanup",A="sereneClose",C=[],E=0,G=!1,H=!1,K=["left","center","right"],L=["top","center","bottom"],N=!1;J=a.fn.serene=function(b){var d=this;return!d[0]&&d.selector?d:(I=a.extend({},c,b||{}),d.each(function(){a(this).addClass("serene-element")}))},J.close=function(){S(z,I.onCleanup),G=!1,I.lowQuality&&f.removeClass("serene-low"),i&&i.length&&i.stop(),j&&j.length&&j.stop(),k.removeClass("serene-animating").stop(!0,!0).hide(),I.slideshow&&clearTimeout(M),a(".serene-slide",f).remove(),C=[],g.stop(!0,!0).hide().attr("class","serene-caption-outer"),h.html(""),I.bullets&&a(".serene-bullets",l).remove(),v.css("overflow",D),e.add(f).hide(),H=!1,I.keyboard&&a(document).unbind("keydown.serene"),S(A,I.onClose)},J.next=function(){return G?!1:(E=P(),X(),void 0)},J.prev=function(){return G?!1:(E=Q(),X(!0),void 0)},J.go=function(a){return G||E===a?!1:(a>E?(E=a,void 0===C[E]?O(E,X):X()):(E=a,void 0===C[E]?O(E,function(){X(!0)}):X()),void 0)},J.start=function(){I.slideshow&&!N&&(N=!0,d.bind(y,function(){M=setTimeout(J.next,I.slideshowSpeed)}).bind(x,function(){clearTimeout(M)}).bind(z,J.stop),n.removeClass("serene-play").addClass("serene-pause").unbind("click").one("click",J.stop),M=setTimeout(J.next,I.slideshowSpeed))},J.stop=function(){I.slideshow&&(clearTimeout(M),d.unbind([y,x,z].join(" ")),n.unbind("click").removeClass("serene-pause").addClass("serene-play").one("click",J.start),N=!1)},a(document).ready(function(){T()})}(jQuery,window);